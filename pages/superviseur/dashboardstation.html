<!--***************************************************************
    * Projet : FEUILLE DE ROUTE MINESUP
    * Code HTML : dashboard.HTML (dashboard page)
    ****************************************************************
    * Auteur : Valentin Magde,Demasso James,Nebo Djomche Joress
    * E-mails : <valentinmagde@gmail.com>
    ****************************************************************
    * Date de création : 04-07-2019 (04 Juillet 2019)
    * Dernière modification : 21-09-2019 (21 Septembre 2019)
    ****************************************************************
    * Historique des modifications :

    ***************************************************************-->
    <!DOCTYPE html>

    <div id="dashboard" class="dashboard">
        
        <div>
            <!-- Recherche avancée par interval de date de nombre des lavages et vidanges-->
            <div id="dashboard-statisticts-panel-recheche" class="panel panel-light">
                <div class="panel-heading">
                    <div class="panel-title">
                        <i class="fa fa-search"></i> <b>Recherche avancée par interval de date de nombre des lavages et vidanges</b>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="margin-5">
                        <!-- Filtres -->
                        <div class="row" style="margin-bottom: 15px;">
                            <div class="col-xs-12 col-sm-8 col-lg-6 pull-right" style="margin-right: -9px">
                                <form>
                                    <!-- Date debut -->
                                    <div class="col-xs-4 col-sm-4 col-lg-4">
                                        <input type="text" onfocus="(this.type='date')" class="form-control" id="datedebut" placeholder="Date de debut" required>
                                    </div>
                    
                                    <!-- Date fin-->
                                    <div class="col-xs-4 col-sm-4 col-lg-4">
                                        <input type="text" onfocus="(this.type='date')" class="form-control" id="datefin" placeholder="Date de fin" required>
                                    </div>
                    
                                    <!-- Recherche -->
                                    <div class="col-xs-4 col-sm-4 col-lg-4">
                                        <button id="filtre-gerant" class="btn btn-info btn-pretty" type="submit" onclick="rechercheLavages();rechercheVidanges()" style="width: 100%">
                                            Recherche
                                        </button>
                                    </div>
                                </form>
                            </div>
                            <!-- <div class="col-lg-4 pull-left">
                                <span class="text-danger"><b> Recherche avancée</b> </span>
                            </div> -->
                        </div>
                        <!-- Lavages -->
                        <div class="row">
                            <div class="col-sm-6 col-lg-3">
                                <div class="tile border-1 bg-white">
                                    <div class="tile-body">
                                        <h4 class="margin-top-5 margin-bottom-5" id="lavages-valides">0</h4>
                                        <h5><b>Lavages validés</b></h5>
                                        <i class="fa fa-motorcycle tile-icon fa-2x text-success"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="tile border-1 bg-white">
                                    <div class="tile-body">
                                        <h4 class="margin-top-5" id="lavages-en-attentes">0</h4>
                                        <h5><b>Lavages en attente</b></h5>
                                        <i class="fa fa-motorcycle tile-icon fa-2x text-warning"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="tile border-1 bg-white">
                                    <div class="tile-body">
                                        <h4 class="margin-top-5" id="lavages-rejetes">0</h4>
                                        <h5><b>Lavages rejetés</b></h5>
                                        <i class="fa fa-motorcycle tile-icon fa-2x text-danger"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="tile border-1 bg-white">
                                    <div class="tile-body">
                                        <h4 class="margin-top-5" id="revenu-lavage">0 FCFA</h4>
                                        <h5><b>Revenu pour lavage</b></h5>
                                        <i class="fa fa-money tile-icon fa-2x text-success"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Vidanges -->
                        <div class="row">
                            <div class="col-sm-6 col-lg-4">
                                <div class="tile border-1 bg-white">
                                    <div class="tile-body">
                                        <h4 class="margin-top-5 margin-bottom-5" id="vidanges-validees">0</h4>
                                        <h5><b>Vidanges validés</b></h5>
                                        <i class="fa fa-truck tile-icon fa-2x text-success"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-4">
                                <div class="tile border-1 bg-white">
                                    <div class="tile-body">
                                        <h4 class="margin-top-5" id="vidanges-en-attentes">0</h4>
                                        <h5><b>Vidanges en attente</b></h5>
                                        <i class="fa fa-truck tile-icon fa-2x text-warning"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-4">
                                <div class="tile border-1 bg-white">
                                    <div class="tile-body">
                                        <h4 class="margin-top-5" id="vidanges-rejetees">0</h4>
                                        <h5><b>Vidanges rejetés</b></h5>
                                        <i class="fa fa-truck tile-icon fa-2x text-danger"></i>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="col-sm-6 col-lg-4">
                                    <div class="tile border-1 bg-white">
                                        <div class="tile-body">
                                            <h2 class="margin-top-5">667 400 FCFA</h2>
                                            <h5><b>Revenu pour lavage</b></h5>
                                            <i class="fa fa-money tile-icon fa-2x text-success"></i>
                                        </div>
                                    </div>
                                </div> -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistiques des Lavages par jour et par semaine -->
            <div id="dashboard-statisticts-panel-lavage" class="panel panel-light">
                <div class="panel-heading">
                    <div class="panel-title">
                        <i class="fa fa-line-chart"></i> <b>Statistiques des Lavages</b>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6 col-lg-6">
                            <div class="tile border-1 bg-white">
                                <div>
                                    <h4 class="text-center text-primary"> Statistique  de la journée de <b><span id="current-date-lavage"></span></b>  </h4>
                                </div>
                                <div class="tile-body">
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Nombre Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="nbre-lavage-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Durée Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="duree-lavage-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Ratio Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="ratio-lavage-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Revenu Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="revenu-lavage-par-jour">0</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-lg-6">
                            <div class="tile border-1 bg-white">
                                <div class="">
                                    <h4 class="text-center text-primary">Statistique du mois de <b> <span id="current-month-lavage"></span></b>  </h4>
                                </div>
                                <div class="tile-body">
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Nbre Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="nbre-lavage-par-mois">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Durée Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="duree-lavage-par-mois">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Ratio Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="ratio-lavage-par-mois">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Revenu Lavages</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="revenu-lavage-par-mois">0</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-top-20">
                        <div class="col-sm-6 col-lg-6">
                            <div class="line-legend" id="legend-nbre-lavage-semaine"></div>
                            <div id="bar-chart-nbre-lavage-semaine">
                                <canvas height="70" width="150"></canvas>
                            </div>
                            <p class="text-center text-primary margin-top-10">Histogramme semaine courante</p>
                        </div>
                        <div class="col-sm-6 col-lg-6">
                            <div class="line-legend" id="legend-revenu-lavage-semaine"></div>
                            <div id="bar-chart-revenu-lavage-semaine">
                                <canvas height="70" width="150"></canvas>
                            </div>
                            <p class="text-center text-primary margin-top-10">Histogramme semaine courante</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistique des vidanges par jour et par semaine-->
            <div id="dashboard-statisticts-panel-vidange" class="panel panel-light">
                <div class="panel-heading">
                    <div class="panel-title">
                        <i class="fa fa-line-chart"></i> <b>Statistiques des Vidanges</b>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6 col-lg-6">
                            <div class="tile border-1 bg-white">
                                <div class="">
                                    <h4 class="text-center text-primary"> Statistique  de la journée de<b><span id="current-date-vidange"></span></b>  </h4> 
                                </div>
                                <div class="tile-body">
                                    <div class="col-lg-4 text-center">
                                        <h5><b>Nombre Vidanges</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="nbre-vidange-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-4 text-center">
                                        <h5><b>Durée Vidanges</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="duree-vidange-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-4 text-center">
                                        <h5><b>Ratio Vidanges</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="ratio-vidange-par-jour">0</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-lg-6">
                            <div class="tile border-1 bg-white">
                                <div class="">
                                    <h4 class="text-center text-primary">Statistique du mois de <b> <span id="current-month-vidange"></span></b>  </h4>
                                </div>
                                <div class="tile-body">
                                    <div class="col-lg-4 text-center">
                                        <h5><b>Nombre Vidanges</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="nbre-vidange-par-mois">0</h4>
                                    </div>
                                    <div class="col-lg-4 text-center">
                                        <h5><b>Durée Vidanges</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="duree-vidange-par-mois">0</h4>
                                    </div>
                                    <div class="col-lg-4 text-center">
                                        <h5><b>Ratio Vidanges</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="ratio-vidange-par-mois">0</h4>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-top-20">
                        <div class="col-sm-6 col-lg-6">
                            <div class="line-legend" id="legend-nbre-vidange-semaine"></div>
                            <div id="bar-chart-nbre-vidange-semaine">
                                <canvas height="70" width="150"></canvas>
                            </div>
                            
                            <p class="text-center text-primary margin-top-10">Histogramme semaine courante</p>
                        </div>
                        
                        <div class="col-sm-6 col-lg-6">
                            <div class="line-legend" id="legend-nbre-vidange-mois"></div>
                            <div id="bar-chart-nbre-vidange-mois">
                                <canvas height="70" width="150"></canvas>
                            </div>
                            <p class="text-center text-primary margin-top-10">Histogramme mois courant</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistique annuelle lavages et vidanges -->
            <div id="dashboard-statisticts-panel-annuelle" class="panel panel-light">
                <div class="panel-heading">
                    <div class="panel-title">
                        <i class="fa fa-line-chart"></i> <b>Statistique annuelle des lavages et vidanges</b>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div>
                                <canvas id="line-chart-annuelle-vidange-lavage" height="250" width="900"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistique des carburants par jour et par semaine-->
            <div id="dashboard-statisticts-panel-carburant" class="panel panel-light">
                <div class="panel-heading">
                    <div class="panel-title">
                        <i class="fa fa-line-chart"></i> <b>Statistiques des Carburants</b>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6 col-lg-6">
                            <div class="tile border-1 bg-white">
                                <div class="">
                                    <h4 class="text-center text-primary"> Statistique de SUPER de la journée de<b><span id="current-date-super-pompe"></span></b>  </h4>
                            
                                </div>
                                <div class="tile-body">
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Qté SUPER vendue </b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="qte-super-vendu-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Revenu  generé</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="revenu-super-genere-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Qté SUPER jaugée </b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="qte-super-jauge-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Ecart SUPER</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="ecart-super-par-jour">0</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-lg-6">
                            <div class="tile border-1 bg-white">
                                <div class="">
                                    <h4 class="text-center text-primary">Statistique GAZOIL de la journée du:<b> <span id="current-date-super-gasoil"></span></b>  </h4>
                                </div>
                                <div class="tile-body">
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Qté GAZOIL vendue </b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="qte-gasoil-vendu-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Revenu  generé</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="revenu-gasoil-genere-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Qté GAZOIL jaugée </b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="qte-gasoil-jauge-par-jour">0</h4>
                                    </div>
                                    <div class="col-lg-3 text-center">
                                        <h5><b>Ecart GAZOIL</b></h5>
                                        <h4 class="margin-top-5 margin-bottom-5" id="ecart-gasoil-par-jour">0</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-top-20">
                        <div class="col-sm-6 col-lg-6">
                            <div class="line-legend" id="legend-super-gazoil-pompe"></div>
                            <div id="bar-chart-super-gazoil-pompe">
                                <canvas height="70" width="150"></canvas>
                            </div>
                            <p class="text-center text-primary margin-top-10">Histogramme semaine courante</p>
                        </div>

                        <div class="col-sm-6 col-lg-6">
                            <div class="line-legend" id="legend-super-gazoil-semaine"></div>
                            <div id="bar-chart-super-gazoil-semaine">
                                <canvas height="70" width="150"></canvas>
                            </div>
                            <p class="text-center text-primary margin-top-10">Histogramme semaine courante</p>
                        </div>
                    </div>
                    <div class="margin-top-20">
                        <div class="">
                            <h4 class="text-center text-primary">Revenu du mois de: <b> <span id="current-month-revenenu-super-gasoil"></span></b>  </h4>
                        </div>
                        <div class="row margin-top-20">
                            <div class="col-lg-12">
                                <div>
                                    <canvas id="line-chart-revenu-super-gazoil-mois" height="250" width="900"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

             <!-- Produits les plus vendus de la semaine-->
             <div id="dashboard-statisticts-panel-produit" class="panel panel-light">
                <div class="panel-heading">
                    <div class="panel-title">
                        <i class="fa fa-line-chart"></i> <b>Produits les plus vendus de la semaine</b>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-xxs-12 col-xs-6 col-sm-4 text-center">
                            <h4>Produits Blancs</h4>
                            <canvas id="dashbboard-produits-blancs" height="100" width="100"></canvas>
                            <h5>
                                Total <span class="badge font-size-lg">2125</span> commandes
                            </h5>
                        </div>
                        <div class="col-xxs-12 col-xs-6 col-sm-4 text-center">
                            <h4>Lubrifiants</h4>
                            <canvas id="dashbboard-lubrifiants" height="100" width="100"></canvas>
                            <h5>
                                Total <span class="badge font-size-lg">1742</span> commandes
                            </h5>
                        </div>
                        <div class="col-xxs-12 col-xs-6 col-sm-4 text-center">
                            <h4>Gaz</h4>
                            <canvas id="dashbboard-gaz" height="100" width="100"></canvas>
                            <h5>
                                Total <span class="badge font-size-lg">69</span> commandes
                            </h5>
                        </div>
                    
                    </div>
                </div>
            </div>
        </div>

        <style type="text/css">
            canvas {
                margin: 0 auto;
            }
        </style>
        <script type="text/javascript">
                let date=new Date();
                date.setDate(date.getDate() - 1)
                let datelocal=date.toLocaleString('fr-Fr',{
                    weekday:'long',
                    year:'numeric',
                    month:'long',
                    day:'numeric'
    
                });
                document.getElementById('current-date-lavage').innerHTML=': '+datelocal;
                document.getElementById('current-date-vidange').innerHTML=': '+datelocal;
                document.getElementById('current-date-super-pompe').innerHTML=': '+datelocal;
                document.getElementById('current-date-super-gasoil').innerHTML=': '+datelocal;
    
                let datee=new Date();
                    let moislocal=datee.toLocaleString('fr-Fr',{
                        year:'numeric',
                        month:'long',
    
                    });
                document.getElementById('current-month-lavage').innerHTML=': '+moislocal;
                document.getElementById('current-month-vidange').innerHTML=': '+moislocal;
                document.getElementById('current-month-revenenu-super-gasoil').innerHTML=moislocal;

                (function() {
                    //initialize nbre lavage
                    afficheNombreLavagesValides(),
                    afficheNombreLavagesRejetes(),
                    afficheNombreLavagesEnAttente(),
                    afficheNombreVidangesValides(),
                    afficheNombreVidangesEnAttente(),
                    afficheNombreVidangesRejetes();
                    afficheRevenuLavage();
                    afficheVidangesAnneeCourante();
                    afficheLavagesAnneeCourante();
                    afficheVidangesSemaineCourante();
                    afficheLavagesSemaineCourante();
                    afficheLavagesParJour();
                    afficheLavagesMoisCourant()
                    afficheVidangesParJour();
                    afficheVidangesMoisCourant()
                    afficheCuveGasoilStation();
                    afficheCuveSuperStation()
                    affichePopmesStatistique();
                    affichePopmesStatistiqueParSemaine();
                    affichePopmesStatistiqueParMois();
        
                    LobiAdmin.loadScript([
                        '../../js/plugin/chartjs/Chart.min.js'
                    ], function(){
                        LobiAdmin.loadScript('../../js/plugin/chartjs/Chart.StackedBar.js', initPage);
                    });
        
                    function initPage(){
                        $('.panel').lobiPanel({
                            reload: false,
                            editTitle: false,
                            sortable: true
                        });

                        var options = {
                            responsive: true
                        };

                        var lineChart,
                            barChart,
                            radarChart,
                            polarChart,
                            pieChart,
                            doughnutChart,
                            stackedBarChart,
                            lineErrorChart;
                            
                        var lineData,
                            barData,
                            radarData,
                            areaData,
                            pieData,
                            doughnutData,
                            barChartData,
                            lineChartData;

                        var COLOR1 = LobiAdmin.lightenColor(LobiAdmin.DEFAULT_COLOR, -15);
                        var COLOR2 = LobiAdmin.lightenColor(LobiAdmin.DEFAULT_COLOR, 0);
                        var COLOR3 = LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 20);
                        var COLOR4 = LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 40);
        
                        var FADEOUT_COLOR_FACTOR = 20;

                        //--------------------- Graphe nombre lavages par semaine -------------------//
                        (function(){
                            var nbrelavagesemainecourante = [0, 0, 0, 0, 0, 0, 0, 0]
        
                            if (localStorage.getItem('lavage-semaine-courante') != null) {
                                nbrelavagesemainecourante = JSON.parse(localStorage.getItem('lavage-semaine-courante'))
                            }

                            // Get the context of the canvas element we want to select
                            var ctx = $("#bar-chart-nbre-lavage-semaine canvas")[0].getContext("2d");
                            
                            barData = {
                                labels: ["Dimanche","Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
                                datasets: fillChartJsColors('bar', [
                                    {
                                        label: "Nombre lavages",
                                        strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 60),
                                        data: nbrelavagesemainecourante
                                    },
                                ])
                            };
                            barChart = new Chart(ctx).Bar(barData, options);
                            document.getElementById('legend-nbre-lavage-semaine').innerHTML = barChart.generateLegend();
                        })();
        
                        //--------------------- Graphe revenu lavages par semaine -------------------//
                        (function(){
                            var revenulavagesemainecourante = [0, 0, 0, 0, 0, 0, 0, 0]
        
                            if (localStorage.getItem('revenu-lavage-semaine-courante') != null) {
                                revenulavagesemainecourante = JSON.parse(localStorage.getItem('revenu-lavage-semaine-courante'))
                            }

                            // Get the context of the canvas element we want to select
                            var ctx = $("#bar-chart-revenu-lavage-semaine canvas")[0].getContext("2d");
                            
                            barData = {
                                labels: ["Dimanche","Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
                                datasets: fillChartJsColors('bar', [
                                    {
                                        label: "Revenu lavages",
                                        strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 40),
                                        data: revenulavagesemainecourante
                                    },
                                ])
                            };
                            barChart = new Chart(ctx).Bar(barData, options);
                            document.getElementById('legend-revenu-lavage-semaine').innerHTML = barChart.generateLegend();
                        })();

                        //--------------------- Graphe nombre vidanges par semaine -------------------//
                        (function(){
                            var week1= [0, 0, 0, 0, 0, 0, 0, 0]
                            var week2= [0, 0, 0, 0, 0, 0, 0, 0]
    
        
                            if (localStorage.getItem('vidange-semaine-courante-flitre') != null) {
                                week1 = JSON.parse(localStorage.getItem('vidange-semaine-courante-flitre'))
                            }

                            if (localStorage.getItem('vidange-semaine-courante') != null) {
                                week2 = JSON.parse(localStorage.getItem('vidange-semaine-courante'))
                            }

                            // Get the context of the canvas element we want to select
                            var ctx = $("#bar-chart-nbre-vidange-semaine canvas")[0].getContext("2d");
                            
                            barData = {
                                labels: ["Dimanche","Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
                                datasets: fillChartJsColors('bar', [
                                    {
                                        label: "Nombre Vidanges avec filtre",
                                        strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 60),
                                        data: week1
                                    },

                                    {
                                        label: "Nombre Vidanges sans filtre",
                                        strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 40),
                                        data: week2
                                    },
                                ])
                            };
                            barChart = new Chart(ctx).Bar(barData, options);
                            document.getElementById('legend-nbre-vidange-semaine').innerHTML = barChart.generateLegend();
                        })();

                        //--------------------- Graphe nombre vidanges par mois -------------------//
                        (function(){
                            var now = new Date();
                            var nbre_jour = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();

                            var month1 = []
                            var month2 = []
                            let labels = []

                            for(let i=0; i < nbre_jour; i++){
                                month1[i] = 0
                                month2[i] = 0
                                labels[i] = i+1
                            }
    
        
                            if (localStorage.getItem('vidange-mois-courant-avec-flitre') != null) {
                                month1 = JSON.parse(localStorage.getItem('vidange-mois-courant-avec-flitre'))
                            }

                            if (localStorage.getItem('vidange-mois-courant-sans-flitre') != null) {
                                month2 = JSON.parse(localStorage.getItem('vidange-mois-courant-sans-flitre'))
                            }

                            // Get the context of the canvas element we want to select
                            var ctx = $("#bar-chart-nbre-vidange-mois canvas")[0].getContext("2d");
                            
                            barData = {
                                labels: labels,
                                datasets: fillChartJsColors('bar', [
                                    {
                                        label: "Nombre Vidanges avec filtre",
                                        strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 60),
                                        data: month1
                                    },

                                    {
                                        label: "Nombre Vidanges sans filtre",
                                        strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 40),
                                        data: month2
                                    },
                                ])
                            };
                            barChart = new Chart(ctx).Bar(barData, options);
                            document.getElementById('legend-nbre-vidange-mois').innerHTML = barChart.generateLegend();
                        })();

                        //--------------------- Graphe annuel vidanges et lavages -------------------//
                        (function(){
                            var lavagesdata = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                            var vidangesdata = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        
                            if (localStorage.getItem('vidange-annee-courante') != null) {
                                vidangesdata = JSON.parse(localStorage.getItem('vidange-annee-courante'))
                            }
        
                            if (localStorage.getItem('lavage-annee-courante') != null) {
                                lavagesdata = JSON.parse(localStorage.getItem('lavage-annee-courante'))
                            }
        
                            // Get the context of the canvas element we want to select
                            var statisticData = {
                                labels: ["Janvier", "Fevrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Decembre"],
                                datasets: fillChartJsColors('line', [{
                                    label: "Nombre de lavages",
                                    strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 50),
                                    data: lavagesdata
                                }, {
                                    label: "Nombre de vidanges",
                                    strokeColor: 'rgba(157, 112, 169, 0.5)',
                                    data: vidangesdata
                                }])
                            };
                            var canvas = $('#line-chart-annuelle-vidange-lavage');
                            var ctx = canvas[0].getContext("2d");
                            var statistictsChart = new Chart(ctx).Line(statisticData, options);
                            var legend = $(statistictsChart.generateLegend());
                            canvas.parent().append(legend);
                        })();

                        //--------------------- Graphe super et gasoil d'une pompe par semaine -------------------//
                        (function(){
                            // Get the context of the canvas element we want to select
                            var ctx = $("#bar-chart-super-gazoil-pompe canvas")[0].getContext("2d");

                            barData = {
                                labels: ["Pompe1", "Pompe2", "Pompe3", "Pompe4", "Pompe5", "Pompe6", "Pompe7"],
                                datasets: fillChartJsColors('line', [{
                                    label: "Quantité Super",
                                    strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 10),
                                    data: [ 100, 180, 98, 98, 200, 400, 500]
                                },
                                {
                                    label: "Quantité Gazoil",
                                    strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 70),
                                    data: [ 90, 110, 120,190, 600, 700, 50]
                                }])
                            };
                            barChart = new Chart(ctx).Bar(barData, options);
                            document.getElementById('legend-super-gazoil-pompe').innerHTML = barChart.generateLegend();
                        })();

                        //--------------------- Graphe super et gasoil de la semaine courante -------------------//
                        (function(){
                            var week1= [0, 0, 0, 0, 0, 0, 0, 0]
                            var week2= [0, 0, 0, 0, 0, 0, 0, 0]
    
        
                            if (localStorage.getItem('super-semaine-courante') != null) {
                                week1 = JSON.parse(localStorage.getItem('super-semaine-courante'))
                            }

                            if (localStorage.getItem('gasoil-semaine-courante') != null) {
                                week2 = JSON.parse(localStorage.getItem('gasoil-semaine-courante'))
                            }

                            // Get the context of the canvas element we want to select
                            var ctx = $("#bar-chart-super-gazoil-semaine canvas")[0].getContext("2d");

                            barData = {
                                labels: ["Dimanche","Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
                                datasets: fillChartJsColors('line', [{
                                    label: "Quantité Super",
                                    strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 10),
                                    data: week1
                                },
                                {
                                    label: "Quantité Gazoil",
                                    strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 70),
                                    data: week2
                                }])
                            };
                            barChart = new Chart(ctx).Bar(barData, options);
                            document.getElementById('legend-super-gazoil-semaine').innerHTML = barChart.generateLegend();
                        })();

                        //--------------------- Graphe revenu super et gasoil du mois courant -------------------//
                        (function(){
                            var now = new Date();
                            var nbre_jour = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();

                            var month1 = []
                            var month2 = []
                            let labels = []

                            for(let i=0; i < nbre_jour; i++){
                                month1[i] = 0
                                month2[i] = 0
                                labels[i] = i+1
                            }
    
        
                            if (localStorage.getItem('revenu-super-mois-courant') != null) {
                                month1 = JSON.parse(localStorage.getItem('revenu-super-mois-courant'))
                            }

                            if (localStorage.getItem('revenu-gasoil-mois-courant') != null) {
                                month2 = JSON.parse(localStorage.getItem('revenu-gasoil-mois-courant'))
                            }


                            // Get the context of the canvas element we want to select
                            var statisticData = {
                                labels: labels,
                                datasets: fillChartJsColors('line', [{
                                    label: " Revenu Super",
                                    strokeColor: LobiAdmin.fadeOutColor(LobiAdmin.DEFAULT_COLOR, 50),
                                    data: month1
                                }, {
                                    label: "Revenu Gazoil",
                                    strokeColor: 'rgba(157, 112, 169, 0.5)',
                                    data: month2
                                }])
                            };
                            var canvas = $('#line-chart-revenu-super-gazoil-mois');
                            var ctx = canvas[0].getContext("2d");
                            var statistictsChart = new Chart(ctx).Line(statisticData, options);
                            var legend = $(statistictsChart.generateLegend());
                            canvas.parent().append(legend);
                        })();

                        //------------------------------------------------------------------------------
                        //          Graphes Produits les plus vendus
                        //------------------------------------------------------------------------------
                        (function() {
                            var data = [{
                                value: 970,
                                color: COLOR1,
                                highlight: LobiAdmin.fadeOutColor(COLOR1, FADEOUT_COLOR_FACTOR),
                                label: "Super"
                            }, {
                                value: 505,
                                color: COLOR2,
                                highlight: LobiAdmin.fadeOutColor(COLOR2, FADEOUT_COLOR_FACTOR),
                                label: "Pétrole"
                            }, {
                                value: 400,
                                color: COLOR3,
                                highlight: LobiAdmin.fadeOutColor(COLOR3, FADEOUT_COLOR_FACTOR),
                                label: "Gazoil"
                            }];
                            var ctx = $('#dashbboard-produits-blancs')[0].getContext('2d');
                            new Chart(ctx).Doughnut(data, {});
                        })();
                        //------------------------------------------------------------------------------
                        (function() {
                            var data = [{
                                value: 370,
                                color: 'brown',
                                highlight: LobiAdmin.fadeOutColor(COLOR4, FADEOUT_COLOR_FACTOR),
                                label: "ATX"
                            }, {
                                value: 457,
                                color: 'magento',
                                highlight: LobiAdmin.fadeOutColor(COLOR3, FADEOUT_COLOR_FACTOR),
                                label: "EP2"
                            }, {
                                value: 270,
                                color: 'orange',
                                highlight: LobiAdmin.fadeOutColor(COLOR1, FADEOUT_COLOR_FACTOR),
                                label: "HRFU"
                            }, {
                                value: 89,
                                color: 'aqua',
                                highlight: LobiAdmin.fadeOutColor(COLOR2, FADEOUT_COLOR_FACTOR),
                                label: "HBF3"
                            }];
                            var ctx = $('#dashbboard-lubrifiants')[0].getContext('2d');
                            // For a pie chart
                            new Chart(ctx).Doughnut(data, {});
                        })();
                        //------------------------------------------------------------------------------            
                        (function() {
                            var data = [{
                                value: 20,
                                color: COLOR3,
                                highlight: LobiAdmin.fadeOutColor(COLOR3, FADEOUT_COLOR_FACTOR),
                                label: "Bouteille de 6kgs"
                            }, {
                                value: 20,
                                color: COLOR1,
                                highlight: LobiAdmin.fadeOutColor(COLOR1, FADEOUT_COLOR_FACTOR),
                                label: "Consigne de 6kgs"
                            }, {
                                value: 8,
                                color: COLOR4,
                                highlight: LobiAdmin.fadeOutColor(COLOR4, FADEOUT_COLOR_FACTOR),
                                label: "Bouteille de 12.5kgs"
                            }, {
                                value: 9,
                                color: COLOR2,
                                highlight: LobiAdmin.fadeOutColor(COLOR2, FADEOUT_COLOR_FACTOR),
                                label: "Consigne de 12.5kgs"
                            }];
                            var ctx = $('#dashbboard-gaz')[0].getContext('2d');
                            // For a pie chart
                            new Chart(ctx).Doughnut(data, {});
                        })();
                    }
                })();
        
        
                if (localStorage.getItem('id') == null || localStorage.getItem('cam') == null) {
                    logout();
                }
        </script>
    </div>
    
    