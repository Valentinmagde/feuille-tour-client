<!--***************************************************************
    * Projet : FEUILLE DE ROUTE MINESUP
    * Code HTML : ajoutprogrammes.HTML (add program page)
    ****************************************************************
    * Auteur : Valentin Magde,Demasso James,Nebo Djomche Joress
    * E-mails : <valentinmagde@gmail.com>
    ****************************************************************
    * Date de création : 04-07-2019 (04 Juillet 2019)
    * Dernière modification : 21-09-2019 (21 Septembre 2019)
    ****************************************************************
    * Historique des modifications :

    ***************************************************************-->
<!DOCTYPE html>
<div id="ajoutstations">
    <div class="row">
        <div class="col-xs-12 col-lg-12">
            <div class="panel panel-light">
                <div class="panel-heading">
                    <div class="panel-title">
                        <h4>Formulaire d'insertion des stations</h4>
                    </div>
                </div>
                <div class="panel-body">
                    <form class="form-horizontal" role="form">
                        <fieldset>
                            <legend>Veuillez renseigner le formulaire <span class="col-md-offset-6">Champs oblgatoire: <span class="text-danger">*</span></span>
                            </legend>

                            <div class="row">
                                <div class="col-lg-6">
                                    <!-- Nom de la station -->
                                    <div class="form-group">
                                        <label for="name" class="col-sm-3 control-label">Nom <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="name" placeholder="Quel est le nom de la station ?">
                                        </div>
                                    </div>

                                    <!-- Adresse -->
                                    <div class="form-group">
                                        <label for="adresse" class="col-sm-3 control-label">Adresse <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="adresse" placeholder="Quel est l'adresse de la station ?">
                                        </div>
                                    </div>

                                    <!-- Latitude -->
                                    <div class="form-group">
                                        <label for="latitude" class="col-sm-3 control-label">Latitude <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="number" class="form-control" onkeyup="verificationVide()" id="latitude" placeholder="Quelle la latitude de la station?">
                                        </div>
                                    </div>

                                    <!-- Longitude -->
                                    <div class="form-group">
                                        <label for="longitude" class="col-sm-3 control-label">Longitude <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="number" class="form-control" onkeyup="verificationVide()" id="longitude" placeholder="Quelle la longitude de la station ?">
                                        </div>
                                    </div>

                                    <!-- Mode de gestion -->
                                    <div class="form-group">
                                        <label for="modegestion" class="col-sm-3 control-label">Mode de gestion <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="modegestion" placeholder="Quel est le mode de gestion de la station ?">
                                        </div>
                                    </div>

                                    <!-- Horaire d'ouverture -->
                                    <div class="form-group">
                                        <div class="col-sm-3">
                                            <label for="horaireouverture" class="pull-right control-label">Horaire d'ouverture <span class="text-danger">*</span</label>
                                        </div>
                                        
                                        <div class="col-sm-7">
                                            <div class="input-group clockpicker" data-autoclose="true" data-placement="top">
                                                <input type="text" class="form-control" onkeyup="verificationVide()" id="horaireouverture" placeholder="Selectionnez l'heure">
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-time"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Nombre d'employés -->
                                    <div class="form-group">
                                        <label for="nbemployes" class="col-sm-3 control-label">Nombre d'employés <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="number" class="form-control" onkeyup="verificationVide()" id="nbemployes" placeholder="Quel est le nombre d'employés de la station?">
                                        </div>
                                    </div>

                                    <!-- Installation -->
                                    <div class="form-group">
                                        <label for="installation" class="col-sm-3 control-label">Installation <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="installation" placeholder="installation de la station ?">
                                        </div>
                                    </div>

                                    <!-- Baie de lavage -->
                                    <div class="form-group">
                                        <label for="baielavage" class="col-sm-3 control-label">Baie de lavage  <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="baielavage" placeholder="Quel est baie de lavage de la station ?">
                                        </div>
                                    </div>

                                    <!-- Baie de service -->
                                    <div class="form-group">
                                        <label for="baieservice" class="col-sm-3 control-label">Baie de service <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="baieservice" placeholder="Quel est le baie de service de la station?">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-6">
                                    <!-- Type de volucompteur  -->
                                    <div class="form-group">
                                        <label for="typevolucompteur" class="col-sm-3 control-label">Type de volucompteur  <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="typevolucompteur" placeholder="Quel est le type de volucompteur de la station?">
                                        </div>
                                    </div>

                                    <!-- Type de cuve -->
                                    <div class="form-group">
                                        <label for="typecuve" class="col-sm-3 control-label">Type de cuve <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="typecuve" placeholder="Quel est le type de cuve de la station?">
                                        </div>
                                    </div>

                                    <!-- Email -->
                                    <div class="form-group">
                                        <label for="email" class="col-sm-3 control-label">Email station <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="email" class="form-control" onkeyup="verificationVide()" id="email" placeholder="Quel est email de la station?">
                                        </div>
                                    </div>

                                    <!-- Positionnement  -->
                                    <div class="form-group">
                                        <label for="positionnement " class="col-sm-3 control-label">Positionnement  <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" onkeyup="verificationVide()" id="positionnement" placeholder="Quel est le positionnement de la station?">
                                        </div>
                                    </div>

                                    <!-- Date d'ouverture -->
                                    <div class="form-group">
                                        <label for="dateouverture" class="col-sm-3 control-label">Date d'ouverture <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="date" class="form-control" onkeyup="verificationVide()" id="dateouverture" placeholder="Quelle est la date d'ouverture de la station?">
                                        </div>
                                    </div>

                                    <!-- Gestionnaire -->
                                    <div class="form-group">
                                        <label for="listresponsables" class="col-sm-3 control-label">Gestionnaire <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <select onkeyup="verificationVide()" class="form-control input-lg" id="listresponsables">
                                                <option value="0">Faites un choix</option>                                    
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Chef de piste -->
                                    <div class="form-group">
                                        <label for="listechefpiste" class="col-sm-3 control-label">Chef de piste <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <select onkeyup="verificationVide()" class="form-control input-lg" id="listechefpiste">
                                                <option value="0">Faites un choix</option>                                    
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Chef de boutique -->
                                    <div class="form-group">
                                        <label for="listechefboutique" class="col-sm-3 control-label">Chef de boutique <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <select onkeyup="verificationVide()" class="form-control input-lg" id="listechefboutique">
                                                <option value="0">Faites un choix</option>                                    
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Ville -->
                                    <div class="form-group">
                                        <label for="listevilles" class="col-sm-3 control-label">Ville <span class="text-danger">*</span></label>
                                        <div class="col-sm-7">
                                            <select onkeyup="verificationVide()" class="form-control input-lg" id="listevilles">
                                                <option value="0">Faites un choix</option>                                    
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <div class="panel-footer text-right">
                            <button type="reset" class="btn btn-default btn-pretty" onclick="reset()">Annuler</button>
                            <button id="envoyerStation" class="btn btn-info btn-pretty" onclick="enregistrerStation()">Soumettre</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        (function() {
            // alert("4");

            document.getElementById("envoyerStation").disabled = true;
            //document.getElementById("validerprogramme").disabled = true;
            LobiAdmin.loadScript([
                '../../js/admin/stations.js'
            ], afficherLesOptionsDeResponsable(), afficherLesOptionsDeVilles());
        })();
        //reset();

        LobiAdmin.loadScript([
            '../../js/plugin/datatables/jquery.dataTables.min.js'
        ], function() {
            LobiAdmin.loadScript([
                '../../js/admin/stations.js',
                '../../js/plugin/clockpicker/bootstrap-clockpicker.min.js',
                '../../js/plugin/datatables/dataTables.bootstrap.min.js',
                '../../js/plugin/datatables/dataTables.responsive.min.js',
                '../../js/plugin/bootstrap-datepicker/bootstrap-datepicker.js'
            ]);
        });

        function initPage() {
            $('#data-table-example1').DataTable();
            $('#data-table-example2').DataTable({
                "scrollY": 300,
                "scrollX": true,
                //responsive: true
            });

            $('#data-table-exampl').DataTable({
                "columnDefs": [{
                    // The `data` parameter refers to the data for the cell (defined by the
                    // `data` option, which defaults to the column being worked with, in
                    // this case `data: 0`.
                    "render": function(data, type, row) {
                        var val = data.replace(/[\$,]/g, '');
                        if (val > 100000) {
                            return '<span class="text-success">' + data + '</span>';
                        } else {
                            return '<span class="text-danger">' + data + '</span>';
                        }
                    },
                    "targets": 5
                }, {
                    "visible": false,
                    "targets": [3]
                }],
                responsive: true
            });
            var table = $('#data-table-example4').DataTable({
                responsive: true
            });

            $('.panel').lobiPanel({
                reload: false,
                editTitle: false
            });
        }

          LobiAdmin.loadScript('js/plugin/knob/jquery.knob.min.js', function(){
            $('.knob').knob();
        });
        
        //Load and initialize x-editable
        LobiAdmin.loadScript([
            '../../js/plugin/select2/select2.min.js',
            '../../js/plugin/moment/moment.min.js',
            '../../js/plugin/mockjax/jquery.mockjax.js',
            '../../js/plugin/x-editable/bootstrap-editable.min.js'
        ], function(){
            LobiAdmin.loadScript([
                '../../js/plugin/x-editable/address.js',
                '../../js/plugin/typeahead/typeahead.bundle.min.js',
                '../../js/plugin/typeahead/bloodhound.min.js',
                '../../js/plugin/x-editable/typeaheadjs.10x.js'
            ], initEditable);
        });
        
        //Load and initialize noUiSlider
        LobiAdmin.loadScript([
            '../../js/plugin/nouislider/jquery.nouislider.all.min.js'
        ], initNoUiSlider);
        
        //Load and initialize ionRangeSlider
        LobiAdmin.loadScript([
            '../../js/plugin/ion.rangeslider/ion.rangeSlider.min.js'
        ], initIonRangeSlider);
        
        //Load and initialize moment js and dateRangePicker
        LobiAdmin.loadScript([
            '../../js/plugin/moment/moment.min.js'
        ], function(){
            LobiAdmin.loadScript([
                '../../js/plugin/daterangepicker/daterangepicker.min.js'
            ], initDateRangePicker);
        });
        
        //Load and initialize moment js and dateRangePicker
        LobiAdmin.loadScript([
            '../../js/plugin/typeahead/typeahead.bundle.min.js',
            '../../js/plugin/typeahead/bloodhound.min.js'
        ], initTypeAhead);
        
        LobiAdmin.loadScript([
            '../../js/plugin/minicolors/jquery.minicolors.min.js',
            '../../js/plugin/clockpicker/bootstrap-clockpicker.min.js',
            '../../js/plugin/timepicker/bootstrap-timepicker.min.js',
            '../../js/plugin/maxlength/bootstrap-maxlength.min.js',
            '../../js/plugin/bootstrap-datepicker/bootstrap-datepicker.min.js',
            '../../js/plugin/jasny-bootstrap/jasny-bootstrap.min.js',
            '../../js/plugin/bootstrap-tags/bootstrap-tagsinput.min.js',
            '../../js/plugin/fileinput/fileinput.min.js',
            '../../js/plugin/chosen/chosen.jquery.min.js',
            '../../js/plugin/duallistbox/jquery.bootstrap-duallistbox.min.js',
            '../../js/plugin/select2/select2.min.js'
        ], initPage);
        
        function initNoUiSlider(){
            for (var i = -20; i <= 40; i++) {
                $('#input-select').append('<option value="' + i + '">' + i + '</option>');
            }
            $('#html5').noUiSlider({
                start: [10, 30],
                connect: true,
                range: {
                    'min': -20,
                    'max': 40
                }
            });
            // A select element can't show any decimals
            $('#html5').Link('lower').to($('#input-select'), null, wNumb({
                decimals: 0
            }));
            $('#html5').Link('upper').to($('#input-number'));
            $("#nonlinear").noUiSlider({
                connect: true,
                behaviour: 'tap',
                start: [500, 4000],
                range: {
                    // Starting at 500, step the value by 500,
                    // until 4000 is reached. From there, step by 1000.
                    'min': [0],
                    '10%': [500, 500],
                    '50%': [4000, 1000],
                    'max': [10000]
                }
            });
            // Write the CSS 'left' value to a span.
            function leftValue(value, handle, slider) {
                $(this).text(handle.parent()[0].style.left);
            }
            // Store the locked state and slider values.
            var lockedState = false,
                    values = [60, 80],
                    slider1 = $("#slider1"),
                    slider2 = $("#slider2");

            // When the button is clicked, the locked
            // state is inverted.
            $("#sliderBtn").click(function () {
                lockedState = !lockedState;
                $(this).text(lockedState ? 'unlock' : 'lock');
            });
            function crossUpdate(value, handle, slider) {
                // If the sliders aren't interlocked, don't
                // cross-update.
                if (!lockedState)
                    return;
                // Select whether to increase or decrease
                // the other slider value.
                var lValue = slider1.is(slider) ? 1 : 0,
                        hValue = lValue ? 0 : 1;
                // Modify the slider value.
                value -= (values[hValue] - values[lValue]);
                // Set the value
                $(this).val(value);
            }
            slider1.noUiSlider({
                start: 60,
                // Disable animation on value-setting,
                // so the sliders respond immediately.
                animate: false,
                range: {
                    min: 50,
                    max: 100
                }
            });
            slider2.noUiSlider({
                start: 80,
                animate: false,
                range: {
                    min: 50,
                    max: 100
                }
            });
            // When a slider changes, store the new values.
            $(".slider").on('set', function () {

                // The .val() function returns a string,
                // but we wan't to do substractions, so
                // convert the values to numbers.
                values = [
                    Number(slider1.val()),
                    Number(slider2.val())
                ];
            });
            // The value will be send to the other slider,
            // using a custom function as the serialization
            // method. The function uses the global 'lockedState'
            // variable to decide whether the other slider is updated.
            slider1.Link('lower').to(slider2, crossUpdate);
            slider2.Link('lower').to(slider1, crossUpdate);
            $('#slider-snap').noUiSlider({
                start: [0, 500],
                snap: true,
                connect: true,
                range: {
                    'min': 0,
                    '10%': 50,
                    '20%': 100,
                    '30%': 150,
                    '40%': 500,
                    '50%': 800,
                    'max': 1000
                }
            });
            $("#slider-limit").noUiSlider({
                start: [10, 120],
                limit: 40,
                behaviour: 'drag',
                connect: true,
                range: {
                    'min': 0,
                    'max': 100
                }
            });
            $("#slider-vertical").noUiSlider({
                start: 40,
                orientation: "vertical",
                range: {
                    'min': 0,
                    'max': 100
                }
            });
        }
        
        function initIonRangeSlider(){
            $("#range_02").ionRangeSlider({
                min: 100,
                max: 1000,
                from: 550
            });
            $("#range_03").ionRangeSlider({
                type: "double",
                grid: true,
                min: 0,
                max: 1000,
                from: 200,
                to: 800,
                prefix: "$"
            });
            $("#range_05").ionRangeSlider({
                type: "double",
                grid: true,
                min: -1000,
                max: 1000,
                from: -500,
                to: 500,
                step: 250
            });
            $("#range_07").ionRangeSlider({
                type: "double",
                grid: true,
                from: 1,
                to: 5,
                values: [0, 10, 100, 1000, 10000, 100000, 1000000]
            });
            $("#range_09").ionRangeSlider({
                grid: true,
                from: 3,
                values: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
            });
            $("#range_11").ionRangeSlider({
                grid: true,
                min: 1000,
                max: 1000000,
                from: 200000,
                step: 1000,
                prettify_enabled: true
            });
            $("#range_20").ionRangeSlider({
                type: "double",
                min: 100,
                max: 200,
                from: 148,
                to: 152,
                prefix: "Range: ",
                postfix: " light years",
                decorate_both: false,
                values_separator: " to "
            });
        }
        
        function initDateRangePicker(){
            $('#demo-daterange').daterangepicker({
                timePicker: true,
                timePickerIncrement: 10,
                format: 'MM/DD/YYYY h:mm A',
                ranges: {
                    'Today': [moment(), moment()],
                    'Yesterday': [moment().subtract('days', 1), moment().subtract('days', 1)],
                    'Last 7 Days': [moment().subtract('days', 6), moment()],
                    'Last 30 Days': [moment().subtract('days', 29), moment()],
                    'This Month': [moment().startOf('month'), moment().endOf('month')],
                    'Last Month': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
                },
                startDate: moment().subtract('days', 29),
                endDate: moment()
            }, function (start, end) {
                $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
            });
        }
        
        function initTypeAhead(){
            var substringMatcher = function (strs) {
                return function findMatches(q, cb) {
                    var matches, substrRegex;

                    // an array that will be populated with substring matches
                    matches = [];

                    // regex used to determine if a string contains the substring `q`
                    substrRegex = new RegExp(q, 'i');

                    // iterate through the pool of strings and for any string that
                    // contains the substring `q`, add it to the `matches` array
                    $.each(strs, function (i, str) {
                        if (substrRegex.test(str)) {
                            // the typeahead jQuery plugin expects suggestions to a
                            // JavaScript object, refer to typeahead docs for more info
                            matches.push({value: str});
                        }
                    });

                    cb(matches);
                };
            };
            var states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California',
                'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii',
                'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
                'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
                'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',
                'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota',
                'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island',
                'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
                'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
            ];
            $('#type-ahead-demo1').typeahead({
                hint: true,
                highlight: true,
                minLength: 1
            },
            {
                name: 'states',
                displayKey: 'value',
                source: substringMatcher(states)
            });

            var bestPictures = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                prefetch: 'data/typeahead/films/post_1960.json',
                remote: 'data/typeahead/films/queries/%QUERY.json'
            });
            bestPictures.initialize();

            $('#type-ahead-remote').typeahead(null, {
                name: 'best-pictures',
                displayKey: 'value',
                source: bestPictures.ttAdapter()
            });
            var nbaTeams = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('team'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                prefetch: 'data/typeahead/nba.json'
            });

            var nhlTeams = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('team'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                prefetch: 'data/typeahead/nhl.json'
            });

            nbaTeams.initialize();
            nhlTeams.initialize();

            $('#type-ahead-multiple').typeahead({
                highlight: true
            },
            {
                name: 'nba-teams',
                displayKey: 'team',
                source: nbaTeams.ttAdapter(),
                templates: {
                    header: '<h3 class="dataset-header">NBA Teams</h3>'
                }
            },
            {
                name: 'nhl-teams',
                displayKey: 'team',
                source: nhlTeams.ttAdapter(),
                templates: {
                    header: '<h3 class="dataset-header">NHL Teams</h3>'
                }
            });
        }
        
        function initEditable(){
            $('.panel').lobiPanel({
                editTitle: false,
                reload: false,
                unpin: false,
                sortable: true
            });
            
             //ajax mocks
            $.mockjaxSettings.responseTime = 500;

            $.mockjax({
                url: '/post',
                response: function (settings) {
                    log(settings, this);
                }
            });

            $.mockjax({
                url: '/error',
                status: 400,
                statusText: 'Bad Request',
                response: function (settings) {
                    this.responseText = 'Please input correct value';
                    log(settings, this);
                }
            });

            $.mockjax({
                url: '/status',
                status: 500,
                response: function (settings) {
                    this.responseText = 'Internal Server Error';
                    log(settings, this);
                }
            });

            $.mockjax({
                url: '/groups',
                response: function (settings) {
                    this.responseText = [
                        {value: 0, text: 'Guest'},
                        {value: 1, text: 'Service'},
                        {value: 2, text: 'Customer'},
                        {value: 3, text: 'Operator'},
                        {value: 4, text: 'Support'},
                        {value: 5, text: 'Admin'}
                    ];
                    log(settings, this);
                }
            });

            function log(settings, response) {
                var s = [], str;
                s.push(settings.type.toUpperCase() + ' url = "' + settings.url + '"');
                for (var a in settings.data) {
                    if (settings.data[a] && typeof settings.data[a] === 'object') {
                        str = [];
                        for (var j in settings.data[a]) {
                            str.push(j + ': "' + settings.data[a][j] + '"');
                        }
                        str = '{ ' + str.join(', ') + ' }';
                    } else {
                        str = '"' + settings.data[a] + '"';
                    }
                    s.push(a + ' = ' + str);
                }
                s.push('RESPONSE: status = ' + response.status);

                if (response.responseText) {
                    if ($.isArray(response.responseText)) {
                        s.push('[');
                        $.each(response.responseText, function (i, v) {
                            s.push('{value: ' + v.value + ', text: "' + v.text + '"}');
                        });
                        s.push(']');
                    } else {
                        s.push($.trim(response.responseText));
                    }
                }
                s.push('--------------------------------------\n');
                $('#console').val(s.join('\n') + $('#console').val());
            }

            
            //defaults
            $.fn.editable.defaults.url = '/post';

            //enable / disable
            $('#enable').click(function () {
                $('#user .editable').editable('toggleDisabled');
            });

            //editables 
            $('#username').editable({
                url: '/post',
                type: 'text',
                pk: 1,
                name: 'username',
                title: 'Enter username'
            });

            $('#firstname').editable({
                validate: function (value) {
                    if ($.trim(value) == '')
                        return 'This field is required';
                }
            });

            $('#sex').editable({
                prepend: "not selected",
                source: [
                    {value: 1, text: 'Male'},
                    {value: 2, text: 'Female'}
                ],
                display: function (value, sourceData) {
                    var colors = {"": "gray", 1: "green", 2: "blue"},
                    elem = $.grep(sourceData, function (o) {
                        return o.value == value;
                    });

                    if (elem.length) {
                        $(this).text(elem[0].text).css("color", colors[value]);
                    } else {
                        $(this).empty();
                    }
                }
            });

            $('#status').editable();

            $('#group').editable({
                showbuttons: false
            });

            $('#vacation').editable({
                datepicker: {
                    todayBtn: 'linked'
                }
            });

            $('#dob').editable();

            $('#event').editable({
                placement: 'right',
                combodate: {
                    firstItem: 'name'
                }
            });

            $('#meeting_start').editable({
                format: 'yyyy-mm-dd hh:ii',
                viewformat: 'dd/mm/yyyy hh:ii',
                validate: function (v) {
                    if (v && v.getDate() == 10)
                        return 'Day cant be 10!';
                },
                datetimepicker: {
                    todayBtn: 'linked',
                    weekStart: 1
                }
            });

            $('#comments').editable({
                showbuttons: 'bottom'
            });

            $('#note').editable();
            $('#pencil').click(function (e) {
                e.stopPropagation();
                e.preventDefault();
                $('#note').editable('toggle');
            });

            $('#state').editable({
                source: ["Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Dakota", "North Carolina", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "West Virginia", "Wisconsin", "Wyoming"]
            });
            var engine = new Bloodhound({
                name: 'states',
                local: [{value: "Alabama"}, {value: "Alaska"}, {value: "Arizona"}, {value: "Arkansas"}, {value: "California"}, {value: "Colorado"}, {value: "Connecticut"}, {value: "Delaware"}, {value: "Florida"}, {value: "Georgia"}, {value: "Hawaii"}, {value: "Idaho"}, {value: "Illinois"}, {value: "Indiana"}, {value: "Iowa"}, {value: "Kansas"}, {value: "Kentucky"}, {value: "Louisiana"}, {value: "Maine"}, {value: "Maryland"}, {value: "Massachusetts"}, {value: "Michigan"}, {value: "Minnesota"}, {value: "Mississippi"}, {value: "Missouri"}, {value: "Montana"}, {value: "Nebraska"}, {value: "Nevada"}, {value: "New Hampshire"}, {value: "New Jersey"}, {value: "New Mexico"}, {value: "New York"}, {value: "North Dakota"}, {value: "North Carolina"}, {value: "Ohio"}, {value: "Oklahoma"}, {value: "Oregon"}, {value: "Pennsylvania"}, {value: "Rhode Island"}, {value: "South Carolina"}, {value: "South Dakota"}, {value: "Tennessee"}, {value: "Texas"}, {value: "Utah"}, {value: "Vermont"}, {value: "Virginia"}, {value: "Washington"}, {value: "West Virginia"}, {value: "Wisconsin"}, {value: "Wyoming"}],
                // remote: '/list',
                datumTokenizer: function (d) {
                    return Bloodhound.tokenizers.whitespace(d.value);
                },
                queryTokenizer: Bloodhound.tokenizers.whitespace
            });
            engine.initialize();
            $('#state2').editable({
                value: 'California',
                typeahead: [
                    {
                        minLength: 1,
                        highlight: true,
                        hint: true
                    },
                    {
                        name: 'states',
                        source: engine.ttAdapter()
                    }
                ]
            });

            $('#fruits').editable({
                pk: 1,
                limit: 3,
                source: [
                    {value: 1, text: 'banana'},
                    {value: 2, text: 'peach'},
                    {value: 3, text: 'apple'},
                    {value: 4, text: 'watermelon'},
                    {value: 5, text: 'orange'}
                ]
            });

            $('#tags').editable({
                inputclass: 'input-large',
                select2: {
                    tags: ['html', 'javascript', 'css', 'ajax'],
                    tokenSeparators: [",", " "]
                }
            });

            var countries = [];
            $.each({"BD": "Bangladesh", "BE": "Belgium", "BF": "Burkina Faso", "BG": "Bulgaria", "BA": "Bosnia and Herzegovina", "BB": "Barbados", "WF": "Wallis and Futuna", "BL": "Saint Bartelemey", "BM": "Bermuda", "BN": "Brunei Darussalam", "BO": "Bolivia", "BH": "Bahrain", "BI": "Burundi", "BJ": "Benin", "BT": "Bhutan", "JM": "Jamaica", "BV": "Bouvet Island", "BW": "Botswana", "WS": "Samoa", "BR": "Brazil", "BS": "Bahamas", "JE": "Jersey", "BY": "Belarus", "O1": "Other Country", "LV": "Latvia", "RW": "Rwanda", "RS": "Serbia", "TL": "Timor-Leste", "RE": "Reunion", "LU": "Luxembourg", "TJ": "Tajikistan", "RO": "Romania", "PG": "Papua New Guinea", "GW": "Guinea-Bissau", "GU": "Guam", "GT": "Guatemala", "GS": "South Georgia and the South Sandwich Islands", "GR": "Greece", "GQ": "Equatorial Guinea", "GP": "Guadeloupe", "JP": "Japan", "GY": "Guyana", "GG": "Guernsey", "GF": "French Guiana", "GE": "Georgia", "GD": "Grenada", "GB": "United Kingdom", "GA": "Gabon", "SV": "El Salvador", "GN": "Guinea", "GM": "Gambia", "GL": "Greenland", "GI": "Gibraltar", "GH": "Ghana", "OM": "Oman", "TN": "Tunisia", "JO": "Jordan", "HR": "Croatia", "HT": "Haiti", "HU": "Hungary", "HK": "Hong Kong", "HN": "Honduras", "HM": "Heard Island and McDonald Islands", "VE": "Venezuela", "PR": "Puerto Rico", "PS": "Palestinian Territory", "PW": "Palau", "PT": "Portugal", "SJ": "Svalbard and Jan Mayen", "PY": "Paraguay", "IQ": "Iraq", "PA": "Panama", "PF": "French Polynesia", "BZ": "Belize", "PE": "Peru", "PK": "Pakistan", "PH": "Philippines", "PN": "Pitcairn", "TM": "Turkmenistan", "PL": "Poland", "PM": "Saint Pierre and Miquelon", "ZM": "Zambia", "EH": "Western Sahara", "RU": "Russian Federation", "EE": "Estonia", "EG": "Egypt", "TK": "Tokelau", "ZA": "South Africa", "EC": "Ecuador", "IT": "Italy", "VN": "Vietnam", "SB": "Solomon Islands", "EU": "Europe", "ET": "Ethiopia", "SO": "Somalia", "ZW": "Zimbabwe", "SA": "Saudi Arabia", "ES": "Spain", "ER": "Eritrea", "ME": "Montenegro", "MD": "Moldova, Republic of", "MG": "Madagascar", "MF": "Saint Martin", "MA": "Morocco", "MC": "Monaco", "UZ": "Uzbekistan", "MM": "Myanmar", "ML": "Mali", "MO": "Macao", "MN": "Mongolia", "MH": "Marshall Islands", "MK": "Macedonia", "MU": "Mauritius", "MT": "Malta", "MW": "Malawi", "MV": "Maldives", "MQ": "Martinique", "MP": "Northern Mariana Islands", "MS": "Montserrat", "MR": "Mauritania", "IM": "Isle of Man", "UG": "Uganda", "TZ": "Tanzania, United Republic of", "MY": "Malaysia", "MX": "Mexico", "IL": "Israel", "FR": "France", "IO": "British Indian Ocean Territory", "FX": "France, Metropolitan", "SH": "Saint Helena", "FI": "Finland", "FJ": "Fiji", "FK": "Falkland Islands (Malvinas)", "FM": "Micronesia, Federated States of", "FO": "Faroe Islands", "NI": "Nicaragua", "NL": "Netherlands", "NO": "Norway", "NA": "Namibia", "VU": "Vanuatu", "NC": "New Caledonia", "NE": "Niger", "NF": "Norfolk Island", "NG": "Nigeria", "NZ": "New Zealand", "NP": "Nepal", "NR": "Nauru", "NU": "Niue", "CK": "Cook Islands", "CI": "Cote d'Ivoire", "CH": "Switzerland", "CO": "Colombia", "CN": "China", "CM": "Cameroon", "CL": "Chile", "CC": "Cocos (Keeling) Islands", "CA": "Canada", "CG": "Congo", "CF": "Central African Republic", "CD": "Congo, The Democratic Republic of the", "CZ": "Czech Republic", "CY": "Cyprus", "CX": "Christmas Island", "CR": "Costa Rica", "CV": "Cape Verde", "CU": "Cuba", "SZ": "Swaziland", "SY": "Syrian Arab Republic", "KG": "Kyrgyzstan", "KE": "Kenya", "SR": "Suriname", "KI": "Kiribati", "KH": "Cambodia", "KN": "Saint Kitts and Nevis", "KM": "Comoros", "ST": "Sao Tome and Principe", "SK": "Slovakia", "KR": "Korea, Republic of", "SI": "Slovenia", "KP": "Korea, Democratic People's Republic of", "KW": "Kuwait", "SN": "Senegal", "SM": "San Marino", "SL": "Sierra Leone", "SC": "Seychelles", "KZ": "Kazakhstan", "KY": "Cayman Islands", "SG": "Singapore", "SE": "Sweden", "SD": "Sudan", "DO": "Dominican Republic", "DM": "Dominica", "DJ": "Djibouti", "DK": "Denmark", "VG": "Virgin Islands, British", "DE": "Germany", "YE": "Yemen", "DZ": "Algeria", "US": "United States", "UY": "Uruguay", "YT": "Mayotte", "UM": "United States Minor Outlying Islands", "LB": "Lebanon", "LC": "Saint Lucia", "LA": "Lao People's Democratic Republic", "TV": "Tuvalu", "TW": "Taiwan", "TT": "Trinidad and Tobago", "TR": "Turkey", "LK": "Sri Lanka", "LI": "Liechtenstein", "A1": "Anonymous Proxy", "TO": "Tonga", "LT": "Lithuania", "A2": "Satellite Provider", "LR": "Liberia", "LS": "Lesotho", "TH": "Thailand", "TF": "French Southern Territories", "TG": "Togo", "TD": "Chad", "TC": "Turks and Caicos Islands", "LY": "Libyan Arab Jamahiriya", "VA": "Holy See (Vatican City State)", "VC": "Saint Vincent and the Grenadines", "AE": "United Arab Emirates", "AD": "Andorra", "AG": "Antigua and Barbuda", "AF": "Afghanistan", "AI": "Anguilla", "VI": "Virgin Islands, U.S.", "IS": "Iceland", "IR": "Iran, Islamic Republic of", "AM": "Armenia", "AL": "Albania", "AO": "Angola", "AN": "Netherlands Antilles", "AQ": "Antarctica", "AP": "Asia/Pacific Region", "AS": "American Samoa", "AR": "Argentina", "AU": "Australia", "AT": "Austria", "AW": "Aruba", "IN": "India", "AX": "Aland Islands", "AZ": "Azerbaijan", "IE": "Ireland", "ID": "Indonesia", "UA": "Ukraine", "QA": "Qatar", "MZ": "Mozambique"}, function (k, v) {
                countries.push({id: k, text: v});
            });
            $('#country').editable({
                source: countries,
                select2: {
                    width: 200,
                    placeholder: 'Select country',
                    allowClear: true
                }
            });
        //--------------------------------------------------------------
            (function ($) {
                var Address = function (options) {
                    this.init('address', options, Address.defaults);
                };

                //inherit from Abstract input
                $.fn.editableutils.inherit(Address, $.fn.editabletypes.abstractinput);

                Address.prototype = $.extend({}, $.fn.editabletypes.address.prototype);

                Address.defaults = $.extend({}, $.fn.editabletypes.abstractinput.defaults, {
                    tpl: '<div class="editable-address"><label><span>City: </span><input type="text" name="city" class="form-control"></label></div>' +
                            '<div class="editable-address"><label><span>Street: </span><input type="text" name="street" class="form-control"></label></div>' +
                            '<div class="editable-address"><label><span>Building: </span><input type="text" name="building" class="form-control"></label></div>',
                    inputclass: ''
                });

                $.fn.editabletypes.address = Address;

            }(window.jQuery));

        //--------------------------------------------------------------

            $('#address').editable({
                url: '/post',
                value: {
                    city: "Moscow",
                    street: "Lenina",
                    building: "12"
                },
                validate: function (value) {
                    if (value.city == '')
                        return 'city is required!';
                },
                display: function (value) {
                    if (!value) {
                        $(this).empty();
                        return;
                    }
                    var html = '<b>' + $('<div>').text(value.city).html() + '</b>, ' + $('<div>').text(value.street).html() + ' st., bld. ' + $('<div>').text(value.building).html();
                    $(this).html(html);
                }
            });

            $('#user .editable').on('hidden', function (e, reason) {
                if (reason === 'save' || reason === 'nochange') {
                    var $next = $(this).closest('tr').next().find('.editable');
                    if ($('#autoopen').is(':checked')) {
                        setTimeout(function () {
                            $next.editable('show');
                        }, 300);
                    } else {
                        $next.focus();
                    }
                }
            });
        }
        
        function initPage(){
            $('.clockpicker').clockpicker({
                donetext: 'Done',
                'default': 'now'
            });
            $('#timepicker1').timepicker({
                disableFocus: true,
                template: 'dropdown'
            });
            $('input#defaultconfig').maxlength();
            $('input#alloptions').maxlength({
                alwaysShow: true,
                warningClass: "label label-success",
                limitReachedClass: "label label-danger",
                separator: ' out of ',
                preText: 'You typed ',
                postText: ' chars available.',
                validate: true
            });
            $('textarea#textarea').maxlength({
                alwaysShow: true
            });

            $('.datepicker-demo').datepicker({});
            $('#datepicker-demo-month').datepicker({
                startView: 1,
                minViewMode: 1
            });
            $('#datepicker-demo-autoclose').datepicker({
                autoclose: true
            });
            $('#datepicker-demo-multiple').datepicker({
                multidate: true,
                todayHighlight: true
            });

            $('#demo-tags-input').tagsinput();
            $('#demo-tags-input').next('.bootstrap-tagsinput').find('input').removeAttr('style');

            $(".chosen-demo").chosen({
                disable_search_threshold: 10,
                width:"100%"
            });
            $('.select2-demo').select2();
            
            $('.minicolors-demo').each(function () {
                //
                // Dear reader, it's actually very easy to initialize MiniColors. For example:
                //
                //  $(selector).minicolors();
                //
                // The way I've done it below is just for the demo, so don't get confused
                // by it. Also, data- attributes aren't supported at this time...they're
                // only used for this demo.
                //
                $(this).minicolors({
                    control: $(this).attr('data-control') || 'hue',
                    defaultValue: $(this).attr('data-defaultValue') || '',
                    inline: $(this).attr('data-inline') === 'true',
                    letterCase: $(this).attr('data-letterCase') || 'lowercase',
                    opacity: $(this).attr('data-opacity'),
                    position: $(this).attr('data-position') || 'bottom left',
                    theme: 'bootstrap'
                });
            });
            var masks = $('.inputmask');
            masks.each(function (ind, el) {
                var $el = $(el);
                var obj = {};
                if ($el.data('mask')) {
                    obj.mask = $el.data('mask');
                }
                if ($el.data('mask-placeholder')) {
                    obj.placeholder = $el.data('mask-placeholder');
                }
                $el.inputmask(obj);
            });
            $("#input-1a").fileinput({showUpload: false});
            $("#input-1").fileinput({showUpload: false, maxFileCount: 10});
            $("#input-21").fileinput({
                previewFileType: "image",
                browseClass: "btn btn-success",
                browseLabel: "Pick Image",
                browseIcon: '<i class="glyphicon glyphicon-picture"></i> ',
                removeClass: "btn btn-danger",
                removeLabel: "Delete",
                removeIcon: '<i class="glyphicon glyphicon-trash"></i> ',
                uploadClass: "btn btn-info",
                uploadLabel: "Upload",
                uploadIcon: '<i class="glyphicon glyphicon-upload"></i> ',
            });
            var demo1 = $('select[name="duallistbox_demo1[]"]').bootstrapDualListbox();
            $("#demoform").submit(function () {
                Lobibox.alert('info', {
                    msg: $('[name="duallistbox_demo1[]"]').val()
                });
                return false;
            });
        }
    </script>
</div>